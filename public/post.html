<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8'>
  <link rel="stylesheet" href="style.css">
  <nav style="font-family:'arial black' " class="topnav">
    <div class="left" >
      <logo class="logo">ʕ•ᴥ•ʔ UNBEARABLE ART</logo>
      </div>
      <div class="right" >
          <a class="active" href="/">HOME</a>
          <a href="feed.html">DISCOVER</a>
          <a href="post.html">UPLOAD</a>
          <a href="login.html">SIGN UP</a>
          <input class="filter"> ● </input>
      </div>
  </nav>
</head>

<body>
  <div class="bodyUL">
    <div class="uploadicon">
      Post Artwork.
    </div>

      <div class="ULform">
      <form class="form" method="post" action="/posts">
      <label for="image">Upload Image</label> <input type="file" accept="image/*" name="image"  id="image" class="imageInput">
      <label for="artname">Artwork Name</label><input type="text" id="artname" name="artname"
        placeholder="Artwork name">
      <label for="description">Description</label><input type="text" id="description" name="description"
        placeholder="Description">
      <label for="price">Price</label><input type="text" id="price" name="price" placeholder="Retail price">
      <label for="hashtags">Hashtags (#)</label><input type="text" id="hashtags" name="hashtags"
        placeholder="Add hashtags">
      <button class="postButton">Submit</button>
      </form>
    <div class="note"></div>
  </div>
</div>
  <script>

      document.querySelector(".postButton").addEventListener("click", sendMessageToServer);
  function sendMessageToServer(e) {
    e.preventDefault();
    let data = new FormData();
    data.append('image', document.querySelector("#image").files[0]);
    data.append ('artname', document.querySelector("#artname").value);
    data.append ('description', document.querySelector("#description").value);
    data.append ('price', document.querySelector("#price").value);
    data.append ('hashtags', document.querySelector("#hashtags").value);

    
    fetch("/posts", {
      method:"POST",
      body: data,
    })
    .then(function(response) {
      console.log(response)
      response.text().then(function (text ) {
      document.querySelector(".note").innerHTML = text;
      })});

      
  };

  </script>


</body>

</html>
